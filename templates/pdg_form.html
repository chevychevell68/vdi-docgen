{% extends "base.html" %}
{% block content %}
<h1 class="h3 mb-3">PDG Questionnaire</h1>
<form method="POST" action="/pdg/submit">
  <input type="hidden" name="pod_scope" value="{{ 'multi' if is_multi else 'single' }}">

  <h2 class="h5 mt-3">Global</h2>
  {% for s, key, label, type_, options, req, scope in g_items %}
    <div class="mb-3">
      <label class="form-label">{{ label }}{% if req %} *{% endif %}</label>
      {% if type_ == 'select' %}
        <select class="form-select" name="global_{{ key }}">
          {% for opt in options.split('|') %}
            <option value="{{ opt }}">{{ opt }}</option>
          {% endfor %}
        </select>
      {% else %}
        <input class="form-control" type="text" name="global_{{ key }}" placeholder="">
      {% endif %}
    </div>
  {% endfor %}

  <h2 class="h5 mt-4">Pod 1</h2>
  {% for s, key, label, type_, options, req, scope in pod1_items %}
    <div class="mb-3">
      <label class="form-label">{{ label }}{% if req %} *{% endif %}</label>
      {% if type_ == 'select' %}
        <select class="form-select" name="pod1_{{ key }}">
          {% for opt in options.split('|') %}
            <option value="{{ opt }}">{{ opt }}</option>
          {% endfor %}
        </select>
      {% else %}
        <input class="form-control" type="text" name="pod1_{{ key }}" placeholder="">
      {% endif %}
    </div>
  {% endfor %}

  {% if is_multi %}
  <h2 class="h5 mt-4">Pod 2</h2>
  {% for s, key, label, type_, options, req, scope in pod2_items %}
    <div class="mb-3">
      <label class="form-label">{{ label }}{% if req %} *{% endif %}</label>
      {% if type_ == 'select' %}
        <select class="form-select" name="pod2_{{ key }}">
          {% for opt in options.split('|') %}
            <option value="{{ opt }}">{{ opt }}</option>
          {% endfor %}
        </select>
      {% else %}
        <input class="form-control" type="text" name="pod2_{{ key }}" placeholder="">
      {% endif %}
    </div>
  {% endfor %}

  <h2 class="h5 mt-4">GSLB (Multi-Pod)</h2>
  <div class="mb-3">
    <label class="form-label">Enable GSLB?</label>
    <select class="form-select" name="gslb_enable">
      <option value="Yes">Yes</option>
      <option value="No">No</option>
      <option value="Planned">Planned</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">GSLB FQDN(s) for Horizon (Internal/External URLs)</label>
    <input class="form-control" type="text" name="gslb_fqdns" placeholder="horizon.example.com; horizon-ext.example.com">
  </div>
  <div class="mb-3">
    <label class="form-label">GTM configuration (data centers, pools, monitors)</label>
    <input class="form-control" type="text" name="gslb_gtm" placeholder="">
  </div>
  <div class="mb-3">
    <label class="form-label">LTM VIPs per site (UAG, CS, Admin, App Volumes, DEM)</label>
    <input class="form-control" type="text" name="gslb_ltm_vips" placeholder="">
  </div>
  <div class="mb-3">
    <label class="form-label">Health monitors (types, intervals, response codes)</label>
    <input class="form-control" type="text" name="gslb_monitors" placeholder="">
  </div>
  <div class="mb-3">
    <label class="form-label">Failover/steering policy (round-robin, topology, latency, geo)</label>
    <input class="form-control" type="text" name="gslb_policy" placeholder="">
  </div>
  <div class="mb-3">
    <label class="form-label">Certificates &amp; SNI (SANs/wildcards, renewal ownership)</label>
    <input class="form-control" type="text" name="gslb_certs" placeholder="">
  </div>
  {% endif %}

  <div class="d-flex gap-2 mt-4">
    <button class="btn btn-primary" type="submit">Review</button>
    <a href="/pdg" class="btn btn-outline-secondary">Back</a>
  </div>
</form>
{% endblock %}
