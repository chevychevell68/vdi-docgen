    <!-- Final Yes/No conversion fix (v1.1.6): clean single checkbox label, preserve GPU logic -->
    <script>
      (function () {
        function dispatchChange(el) {
          el.dispatchEvent(new Event('input', { bubbles: true }));
          el.dispatchEvent(new Event('change', { bubbles: true }));
        }

        function nearestQuestionLabel(el) {
          const group = el.closest('.mb-3, .form-group, fieldset, .row, div');
          if (group) {
            const lab = group.querySelector('label.form-label');
            if (lab) return lab;
          }
          let prev = el.previousElementSibling;
          while (prev) {
            if (prev.tagName && prev.tagName.toLowerCase() === 'label') return prev;
            prev = prev.previousElementSibling;
          }
          return null;
        }

        function cleanLabelText(text) {
          if (!text) return '';
          // normalize spacing, ensure single '?'
          return text.replace(/\s*\?\s*$/, '').trim() + '?';
        }

        function convertRadioGroups(root) {
          const radios = Array.from(root.querySelectorAll('input[type="radio"][name]'));
          const groups = {};
          radios.forEach(r => (groups[r.name] = groups[r.name] || []).push(r));

          Object.entries(groups).forEach(([name, list]) => {
            if (list.length < 2) return;

            let yesRadio = null, noRadio = null;
            list.forEach(r => {
              const val = (r.value || '').trim().toLowerCase();
              const lab = r.id ? root.querySelector('label[for="' + r.id + '"]') : null;
              const txt = lab ? lab.textContent.trim().toLowerCase() : '';
              if (val === 'yes' || txt === 'yes') yesRadio = r;
              if (val === 'no'  || txt === 'no')  noRadio  = r;
            });
            if (!(yesRadio && noRadio)) return;

            const qLabel = nearestQuestionLabel(list[0]);
            const qText  = cleanLabelText(qLabel ? qLabel.textContent : name);
            const star   = qLabel && qLabel.querySelector('.req-asterisk');

            // Build checkbox + label
            const wrap = document.createElement('div');
            wrap.className = 'form-check mb-2';
            const cb = document.createElement('input');
            cb.type = 'checkbox';
            cb.className = 'form-check-input yesno-check';
            cb.id = name + '_cb';
            const lab = document.createElement('label');
            lab.className = 'form-check-label';
            lab.htmlFor = cb.id;
            lab.textContent = qText;
            if (star) lab.appendChild(star.cloneNode(true));
            wrap.append(cb, lab);

            // Insert before first radio
            const first = list[0];
            const insertionPoint = first.closest('.form-check, .mb-2, .mb-3, .form-group') || first;
            insertionPoint.parentElement.insertBefore(wrap, insertionPoint);

            // Hide original label and radios (keep enabled)
            if (qLabel) qLabel.style.display = 'none';
            list.forEach(r => {
              const rc = r.closest('.form-check, .form-check-inline');
              if (rc) rc.style.display = 'none';
            });

            // Sync states
            cb.checked = !!yesRadio.checked;
            cb.addEventListener('change', () => {
              yesRadio.checked = cb.checked;
              if (noRadio) noRadio.checked = !cb.checked;
              dispatchChange(yesRadio);
              if (noRadio) dispatchChange(noRadio);
            });
          });
        }

        function convertSelectYesNo(root) {
          const selects = Array.from(root.querySelectorAll('select[name], select[id]'));
          selects.forEach(sel => {
            if (sel.dataset.ynConverted) return;
            const texts = Array.from(sel.options).map(o => (o.textContent || '').trim().toLowerCase());
            if (!(texts.includes('yes') && texts.includes('no'))) return;

            const name  = sel.name || sel.id;
            const qLabel = nearestQuestionLabel(sel);
            const qText  = cleanLabelText(qLabel ? qLabel.textContent : name);
            const star   = qLabel && qLabel.querySelector('.req-asterisk');

            const wrap = document.createElement('div');
            wrap.className = 'form-check mb-2';
            const cb = document.createElement('input');
            cb.type = 'checkbox';
            cb.className = 'form-check-input yesno-check';
            cb.id = name + '_cb';
            const lab = document.createElement('label');
            lab.className = 'form-check-label';
            lab.htmlFor = cb.id;
            lab.textContent = qText;
            if (star) lab.appendChild(star.cloneNode(true));
            wrap.append(cb, lab);

            // Insert before select; hide original label + select
            sel.parentElement.insertBefore(wrap, sel);
            if (qLabel) qLabel.style.display = 'none';
            sel.style.display = 'none';

            // Sync
            cb.checked = (sel.value || '').trim().toLowerCase() === 'yes';
            cb.addEventListener('change', () => {
              sel.value = cb.checked ? 'Yes' : 'No';
              dispatchChange(sel);
            });
            sel.addEventListener('change', () => {
              cb.checked = (sel.value || '').trim().toLowerCase() === 'yes';
            });
            sel.dataset.ynConverted = '1';
          });
        }

        function run(root) {
          convertRadioGroups(root);
          convertSelectYesNo(root);
        }

        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', () => run(document));
        } else {
          run(document);
        }
      })();
    </script>
